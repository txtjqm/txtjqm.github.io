<!-- script src="jquery-3.6.0.min.js" >< / script  -->
march 29b <br/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<h3>access this file at https://txtjqm.github.io/copyCmds.html <br/>
  it is located at https://github.com/txtjqm/txtjqm.github.io <br/>
after editing this file, must update index.html for change to show up.</h3>
<style>
  .itemFont { padding:2px; font-family: 'Verdana'; font-weight: 500; font-size: 14px;  }
  .indentWrappedLines { text-indent: -2em; padding-left: 2em;  }	
</style>
<div style="position: -webkit-sticky; position: sticky; top: 10;">
  <input id="showSelected" type="text" size="80" value="" style="color: red; font-size: 18px;"
  ></div><br/>
<div id="div1"></div>
<!--
<textarea id="tx1" rows=1 class="zz" >abcd</textarea>
<button onclick="myFunction3('tx1')" >Copy</button>
-->
<br/><br/>

<textarea id='txtListOfItems'
				style='display:none; width:-webkit-fill-available; /* got from chrome-inspect window */
				margin-bottom: -4px; /* gap otherwise ?? */
				padding:5px 10px 5px 10px; 
				border-width: 0px;
				margin-top:5px; 
				font: normal 600 11px verdana;' rows="6" 
			>

:%s/^\s*\d*\s*//    // to remove line number from history
ssh root@159.zz.zz.zz "(cat ~/.ssh/id_rsa.pub)" > abc.txt
ssh -i "myKeyPair2.pem" ubuntu@xx.xx.xx.xx "cd spboot-nginx-reactjs-compose && ./RestartWebA"
cd spboot && ./gradlew clean build -b build.gradle && cd ..
/
// docker-compose commands. It references containers by the service name as setup in docker-compose.yml
vi docker-compose.yml
sudo docker-compose ps -a                 // shows container name and other stuff but not service name
sudo docker-compose ps --services         // shows services names running as defined in docker-compose.yml but nothing else

sudo docker-compose logs $(sudo docker-compose ps --services)   // shows logs of all services
sudo docker-compose up -d
sudo docker-compose down
// when modifying a dockerfile, run below, then down, then up.
sudo docker-compose build     
sudo docker-compose build dbServiceA      // fuilds only that service
// 
sudo docker-compose exec webA date        // webA is the name of the service defined in docker-compose.yml
sudo docker-compose exec nginxA cat /etc/nginx/conf.d/default.conf  // by service name defined in docker-compose.yml
sudo docker-compose logs webA
sudo docker-compose restart webA
sudo docker-compose images
// how to fix nginx default.conf and apply it to container:
// this example does it without bringing down docker-compose. It can also be done by bringing down docker-compose and removing image using docker.
sudo docker-compose stop nginxA          // stop service nginxA without bringing down docker-compose
// this will still show the image -> sudo docker-compose stop nginxA
sudo docker-compose rm nginxA            // removes image for the service as shown in docker-compose.yml
// now this will not show the image -> sudo docker-compose stop nginxA  
sudo docker-compose build nginxA         // optional: do this or just bring up docker. Rebuilds the service as shown in docker-compose.yml
sudo docker-compose up -d                // now start the rebuild image
curl localhost:80/hello.html    // test it. Caution, use http, not https when testing in browser. AWS links do https !!!
sudo docker-compose logs nginxA           // shows log of specific service
/
/
sudo docker build -t react_basic_image -f Dockerfile.react_basic .
sudo docker build -t reacttrash_image -f Dockerfile.onestep .
sudo docker run --name trashcontainera -p 3000:3000 -d reacttrash_image
sudo docker exec -it runtrash sh
sudo docker load < /local/react_basic_image.tar
sudo docker save  react_basic_image > /local/react_basic_image.tar					       

sudo docker images 
sudo docker image rm -f reacttrash_image        // stops and removes (-f) an image
sudo docker system prune -a     // removes all images including downloaded ones
sudo docker ps
sudo docker ps -aq                                  // -q causes only container id to appear
sudo docker stop 6b52e72f167a                       // from above container id
sudo docker ps -aq --filter=name=nginx_container  // filter by container name
sudo docker ps -aq --filter=name=nginx_*          // wildcard
sudo docker logs $(sudo docker ps -aq --filter=name=nginx_container)   // nested statement
sudo docker stop $(sudo docker ps -aq --filter=name=nginx_container)
sudo docker rm -f $(sudo docker ps -aq)        // Remove all containers. The -f option stops the conainer first
sudo docker exec run3 cat /etc/nginx/conf.d/default.conf
curl localhost:80

/
sudo docker service create --secret=colors2 --name xyzw 358101a812a0
java -Dserver.port=80 -jar build/libs/spring-boot-0.0.1-SNAPSHOT.jar
/

sudo docker container ls -a
/
git clone git@host_rsaNO:txtjqm/spboot-nginx-reactjs-compose.git   // host_rasNO is setup in ~/.ssh/config file
git fetch
git diff origin/main
git remote add origin https://github.com/txtjqm/springBootDigoc.git
git remote -v
git config --global user.email "zzzz@gmail.com"
git commit -m "firstcommit"
git push -u origin master
git push git@github.com:txtjqm/springBootDigoc.git
git diff origin/main
/
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_rsa
git checkout br2             // switch over to branch
git branch                   // shows branch I'm on
git pull
// In Git, "origin" is a shorthand name for the remote repository 
//  that a project was originally cloned from
/
git config --global user.name "John Doe"
git config --global user.email johndoe@example.com
git init
git add .
git commit -m "first commit"
git remote set-url origin https://github.com/txtjqm/REACT-nginx-docker-compose.git
git remote add origin https://github.com/txtjqm/testwednesday.git
git push -u origin master
/
sudo  apt-get update && sudo apt install nodejs && sudo apt install npm
npx create-react-app react_app1     // to create a react app called react_app1
npm start    // start react dev server  
npm run-script build  // creates build folder with an index.html which starts all of reactjs
npm config set strict-ssl=false     // this fixes a problem on the pc
npm install react-router-dom     // later, to setup react routing:
/
sudo docker build -t reacttrash1-build -f Dockerfile.uses_react_node_modules .
sudo docker run --name run-reacttrash1 -p 88:3000 -d reacttrash1-build
sudo docker exec -it run-reacttrash1 sh
sudo docker logs $(sudo docker ps -aq --filter=name=run-reacttrash1)
sudo docker rm -f run-reacttrash1
sudo docker image rm reacttrash1-build
/ 
sudo docker exec -it react_container npm run-script build // build react.js in container
</textarea>

<script>
  window.addEventListener('load', (event) => {
    makeList(); //alert("loaded");
  });
  function setClipboard(text) {
      let data = [new ClipboardItem({ "text/plain": text })];
      navigator.clipboard.write(data).then(function() {
        /* success */
      }, function() {
        /* failure */
      });
  }
  function myFunction3(textToCopy) {
      console.log(textToCopy);
      $('#showSelected').val(textToCopy);
      $('#showSelected').select();
      // $('#showSelected').setSelectionRange(0, 99999); /* For mobile devices */
      document.execCommand("copy");
      window.getSelection().removeAllRanges();
  }
  function makeList() {
      // split items by newline and put into an array
      var listData = ($('#txtListOfItems').val()).split(/[\n]+/);
      // Make a container element for the list
      listContainer = document.createElement('div');
      numberOfListItems = listData.length;
      var listItem;
      var i;
      document.getElementById('div1').appendChild(listContainer);
      for (i = 0; i < numberOfListItems; ++i) {
          // create an item for each one
          //listItem = document.createElement('textarea');
	  listItem = document.createElement('div');
          //listItem.setAttribute('rows', '1'); listItem.setAttribute('cols', '80');            	  	  
          listItem.innerHTML = listData[i];
          listItem.setAttribute('id', listData[i]);
	  listItem.setAttribute('class', 'itemFont indentWrappedLines'); // must appear AFTER setting content
          listContainer.appendChild(listItem);
          //copylink = document.createElement('button');
          let withoutComment = listData[i].split(/[^:]\/\//)[0];
	  withoutComment = withoutComment.trim();
          console.log('zz: ' + withoutComment);
          let fcnCall = 'myFunction3(\'' + withoutComment + '\')'; // trim off the // from what gets copied
          listItem.setAttribute('onclick', fcnCall);
          // listContainer.appendChild(document.createElement('br'));
    }
}

/*
      let listDataqqq = [
      'sudo docker ps',
'sudo docker logs $(docker ps -aq)',
'sudo docker system prune -a',
'sudo docker images',
      ]
*/
</script>

